# gemini.md: Blueprint del Esqueleto de Software "Chaski"

## 1. VisiÃ³n del Proyecto

**Nombre del Proyecto:** Chaski Framework (o "Esqueleto Chaski")

**VisiÃ³n:** Crear un esqueleto de software (boilerplate) modular, escalable y optimizado para el mercado peruano. "Chaski" representa la rapidez y eficiencia con la que entregaremos soluciones web profesionales a nuestros clientes. El objetivo es reducir el tiempo de desarrollo en un 60-70% para proyectos recurrentes, permitiÃ©ndonos ofrecer precios competitivos y entregar valor rÃ¡pidamente.

**Clientes Objetivo Iniciales:**
1.  **Restaurantes, CafeterÃ­as y Bares.**
2.  **Tiendas de Ropa, Moda y Accesorios (Retail).**

---

## 2. FilosofÃ­a y Principios de DiseÃ±o

* **Modularidad (Plug-and-Play):** El nÃºcleo debe ser agnÃ³stico al tipo de negocio. Las funcionalidades especÃ­ficas (menÃºs, catÃ¡logos) se cargarÃ¡n como mÃ³dulos independientes.
* **PersonalizaciÃ³n Sencilla (Theming):** Debe ser fÃ¡cil cambiar colores, tipografÃ­as y logos para adaptar el sitio a la marca de cada cliente sin reescribir cÃ³digo.
* **Rendimiento y SEO Primero:** Las webs deben ser rÃ¡pidas y estar optimizadas para los motores de bÃºsqueda desde su base (uso de SSR/SSG).
* **GestiÃ³n por el Cliente:** El cliente final debe poder gestionar su contenido (platos del menÃº, productos, fotos) a travÃ©s de un panel de administraciÃ³n amigable (CMS Headless).

---

## 3. Pila TecnolÃ³gica (Tech Stack)

* **Frontend:** **Next.js (React)** - Excelente para SEO (SSR/SSG), gran ecosistema y rendimiento.
* **Estilos:** **Tailwind CSS** - Para un desarrollo rÃ¡pido, personalizable y mantenible.
* **Backend (API):** **Node.js con Express.js o NestJS** - NestJS es recomendado por su arquitectura modular y el uso de TypeScript, lo que se alinea con la visiÃ³n del proyecto.
* **Base de Datos:** **PostgreSQL** - Robusta, escalable y excelente para manejar datos relacionales como usuarios, Ã³rdenes e inventario.
* **CMS Headless:** **Strapi.io** - Es de cÃ³digo abierto, se puede auto-hospedar (ahorro de costos) y es muy fÃ¡cil de usar para el cliente final para gestionar productos, menÃºs, etc.
* **Pasarelas de Pago (PerÃº):** La arquitectura debe permitir una fÃ¡cil integraciÃ³n. Las prioridades son:
    1.  **Mercado Pago** (muy popular)
    2.  **Izipay / Niubiz** (requieren afiliaciÃ³n comercial)
    3.  **Stripe** (para clientes internacionales o mÃ¡s tecnolÃ³gicos)
* **GestiÃ³n de Estado (Frontend):** **Zustand** o **Redux Toolkit** - Para manejar estados globales como el carrito de compras.

---

## 4. Estructura de Carpetas del Esqueleto
/chaski
â”œâ”€â”€ ğŸ“‚ client/              # Frontend (Next.js)
â”‚   â”œâ”€â”€ ğŸ“‚ components/      # Componentes UI reutilizables (Botones, Inputs, Cards)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ common/
â”‚   â”‚   â””â”€â”€ ğŸ“‚ modules/     # Componentes especÃ­ficos de cada mÃ³dulo
â”‚   â”œâ”€â”€ ğŸ“‚ contexts/       # Contextos de React (Ej: AuthContext, CartContext)
â”‚   â”œâ”€â”€ ğŸ“‚ layouts/         # Estructuras de pÃ¡gina (Ej: MainLayout con Navbar/Footer)
â”‚   â”œâ”€â”€ ğŸ“‚ pages/           # Rutas y pÃ¡ginas del sitio
â”‚   â”œâ”€â”€ ğŸ“‚ public/          # Archivos estÃ¡ticos (imÃ¡genes, fuentes)
â”‚   â”œâ”€â”€ ğŸ“‚ styles/          # CSS Global y configuraciÃ³n de Tailwind
â”‚   â””â”€â”€ ğŸ“‚ lib/             # Funciones de ayuda, cliente de API
â”‚
â”œâ”€â”€ ğŸ“‚ server/              # Backend (NestJS / Express)
â”‚   â”œâ”€â”€ ğŸ“‚ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ auth/         # LÃ³gica de autenticaciÃ³n (JWT)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ config/       # ConfiguraciÃ³n de DB, variables de entorno
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ modules/     # MÃ³dulos de negocio (core y especÃ­ficos)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ core/     # Funcionalidades base (usuarios, roles)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ restaurant/ # LÃ³gica para restaurantes (menÃºs, reservas)
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ ecommerce/  # LÃ³gica para tiendas (productos, Ã³rdenes, pagos)
â”‚   â”‚   â”œâ”€â”€ main.ts         # Punto de entrada de la app
â”‚   â””â”€â”€ Dockerfile        # Para contenedorizar el backend
â”‚
â”œâ”€â”€ ğŸ“‚ cms/                 # ConfiguraciÃ³n y backups del CMS (Strapi)
â”‚
â”œâ”€â”€ ğŸ“œ .env.example         # Variables de entorno de ejemplo
â”œâ”€â”€ ğŸ“œ .gitignore
â”œâ”€â”€ ğŸ“œ docker-compose.yml   # Para levantar todo el entorno (DB, Server, CMS)
â””â”€â”€ ğŸ“œ gemini.md            # Este archivo

## 5. MÃ³dulos y Funcionalidades Clave

### 5.1. MÃ³dulo Core (Base para todos los proyectos)

-   [ ] Sistema de AutenticaciÃ³n (JWT para usuarios y administradores).
-   [ ] Panel de AdministraciÃ³n bÃ¡sico (integrado o vÃ­a el CMS).
-   [ ] Sistema de Theming (archivo de configuraciÃ³n `theme.config.js` para colores, fuentes, logo).
-   [ ] Componentes Comunes (Navbar, Footer, BotÃ³n de WhatsApp flotante, Formulario de Contacto).
-   [ ] PÃ¡gina "Nosotros", "Contacto" (con mapa).

### 5.2. MÃ³dulo Restaurante (`@modules/restaurant`)

-   [ ] **GestiÃ³n de MenÃº:** Entidad en el CMS para Platos con nombre, descripciÃ³n, precio, foto y categorÃ­a (Entradas, Segundos, Bebidas, etc.).
-   [ ] **Componente de MenÃº Digital:** Componente de React que renderiza el menÃº de forma atractiva y filtrable.
-   [ ] **Sistema de Reservas:** Formulario de reserva que envÃ­a un correo de notificaciÃ³n o guarda la reserva en la base de datos.
-   [ ] **GalerÃ­a de Fotos:** Integrada con el CMS para que el cliente suba fotos del local y los platos.

### 5.3. MÃ³dulo E-commerce (`@modules/ecommerce`)

-   [ ] **GestiÃ³n de Productos:** Entidad en el CMS para Productos con nombre, SKU, descripciÃ³n, fotos, precio, stock.
-   [ ] **Variantes de Producto:** Soporte para tallas, colores, etc.
-   [ ] **CatÃ¡logo de Productos:** PÃ¡gina con filtros (por categorÃ­a, precio) y bÃºsqueda.
-   [ ] **Carrito de Compras:** LÃ³gica de estado global para aÃ±adir, eliminar y actualizar productos en el carrito.
-   [ ] **Proceso de Checkout:** Formulario para datos de envÃ­o y facturaciÃ³n.
-   [ ] **IntegraciÃ³n de Pasarela de Pagos:** Interfaz estandarizada en el backend para conectar `Mercado Pago` u otras.
-   [ ] **GestiÃ³n de Ã“rdenes:** Guardado de Ã³rdenes en la base de datos con su estado (Pendiente, Pagado, Enviado).

---

## 6. Hoja de Ruta (Roadmap)

* **Fase 1 (Mes 1): El NÃºcleo.**
    * [ ] Montar la estructura de carpetas y repositorios (Git).
    * [ ] Configurar el entorno de desarrollo con Docker.
    * [ ] Desarrollar el MÃ³dulo Core: AutenticaciÃ³n, Theming y componentes bÃ¡sicos.
    * [ ] Integrar Strapi y definir los modelos de datos bÃ¡sicos.

* **Fase 2 (Mes 2): MÃ³dulo Restaurante.**
    * [ ] Desarrollar las entidades y la lÃ³gica del backend para menÃºs y reservas.
    * [ ] Crear los componentes de React para el frontend.
    * [ ] Construir un sitio de demostraciÃ³n completo para un restaurante ficticio.

* **Fase 3 (Mes 3-4): MÃ³dulo E-commerce.**
    * [ ] Desarrollar la lÃ³gica de productos, inventario y Ã³rdenes.
    * [ ] Implementar el carrito de compras y el flujo de checkout.
    * [ ] **Prioridad Alta:** Integrar y probar exitosamente la pasarela de Mercado Pago.
    * [ ] Construir un sitio de demostraciÃ³n completo para una tienda de ropa ficticia.

* **Fase 4 (Continuo): DocumentaciÃ³n y Mejora.**
    * [ ] Documentar cÃ³mo usar el esqueleto, cÃ³mo configurar un nuevo cliente y cÃ³mo activar mÃ³dulos.
    * [ ] Refinar y optimizar el cÃ³digo base a partir de los primeros proyectos reales.
